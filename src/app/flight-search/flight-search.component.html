<div class="card">
  <div class="card-header">
    <h2 class="card-title">Flight Search</h2>
  </div>

  <div class="card-body">
    <form>
      <div class="form-group">
        <label>From:</label>
        <input [(ngModel)]="from" name="from" class="form-control">
      </div>
      <div class="form-group">
        <label>To:</label>
        <input [(ngModel)]="to" name="to" class="form-control">
      </div>
      <div class="form-group">
        <button (click)="search()" class="btn btn-default">
          Search
        </button>
      </div>
    </form>
  </div>
</div>

@if (flights.length) {
  <div class="card">
    <div class="card-body">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th>Id</th>
            <th>From</th>
            <th>To</th>
            <th>Date</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          @for (flight of flights; track flight.id) {
            <tr [class.selected]="selectedFlight?.id === flight?.id">
              <td>{{ flight.id }}</td>
              <td>{{ flight.from | city:'short' | async }}</td>
              <td>{{ flight.to | city | async }}</td>
              <td>{{ flight.date | date:'dd.MM.yyyy HH:mm' }}</td>
              <td>
                <a (click)="select(flight)">
                  {{ selectedFlight?.id === flight?.id ? 'Remove' : 'Select' }}
                </a>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
}

@if (selectedFlight) {
  <div class="card">
    <div class="card-body">
      <pre>{{ selectedFlight | json }}</pre>
    </div>
  </div>
}

@if (selectedFlight) {
  <div class="card">
    <div class="card-header">
      <h2 class="card-title">Flight Edit</h2>
    </div>

    <div class="card-body">
      @if (message) {
        <div class="alert alert-primary">
          {{ message }}
        </div>
      }

      <form>
        <div class="form-group">
          <label>ID:</label>
          <input [(ngModel)]="selectedFlight.id" name="id" class="form-control" />
        </div>

        <div class="form-group">
          <label>From:</label>
          <input [(ngModel)]="selectedFlight.from" name="from" class="form-control" />
        </div>

        <div class="form-group">
          <label>To:</label>
          <input [(ngModel)]="selectedFlight.to" name="to" class="form-control" />
        </div>

        <div class="form-group">
          <label>Date:</label>
          <input [(ngModel)]="selectedFlight.date" name="date" class="form-control" />
        </div>

        <div class="form-group">
          <input [(ngModel)]="selectedFlight.delayed" name="delayed" type="checkbox" id="delayed" />
          <label for="delayed">Delayed</label>
        </div>

        <div class="form-group">
          <button (click)="save()" class="btn btn-default">Save</button>
        </div>
      </form>
    </div>
  </div>
}
